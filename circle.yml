machine:
  node:
    version: 7.4
  services:
    - docker

test:
  pre:
    - npm i
  override:
    - docker run -d -p 4444:4444 selenium/standalone-chrome
    - npm run test || true

deployment:
   release:
     tag: /v[0-9]+(\.[0-9]+)*/
     owner: rfit
     commands:
       - npm run deploy
       - firebase -P production deploy -p deploy/production
   staging:
     branch: [master]
     commands:
       - npm run deploy
       - firebase -P staging deploy -p deploy/staging
